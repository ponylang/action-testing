



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://ponylang.github.io/action-testing/src/http/url/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-ponylang-0.2.8">
    
    
      
        <title>Url - http</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.b80b25f7.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.0b5df86e.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://ponylang.github.io/action-testing/" title="http" class="md-header-nav__button md-logo">
          
            <img src="../../../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                http
              </span>
              <span class="md-header-nav__topic">
                Url
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../assets/images/logo.png" width="48" height="48">
      
    </span>
    http
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="http" class="md-nav__link">
      http
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      package http
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        package http
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPartUser/" title="primitive URLPartUser" class="md-nav__link">
      primitive URLPartUser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPartPassword/" title="primitive URLPartPassword" class="md-nav__link">
      primitive URLPartPassword
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPartHost/" title="primitive URLPartHost" class="md-nav__link">
      primitive URLPartHost
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPartPath/" title="primitive URLPartPath" class="md-nav__link">
      primitive URLPartPath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPartQuery/" title="primitive URLPartQuery" class="md-nav__link">
      primitive URLPartQuery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPartFragment/" title="primitive URLPartFragment" class="md-nav__link">
      primitive URLPartFragment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLPart/" title="type URLPart" class="md-nav__link">
      type URLPart
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URLEncode/" title="primitive URLEncode" class="md-nav__link">
      primitive URLEncode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-URL/" title="class URL" class="md-nav__link">
      class URL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-Status/" title="trait Status" class="md-nav__link">
      trait Status
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusContinue/" title="primitive StatusContinue" class="md-nav__link">
      primitive StatusContinue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusSwitchingProtocols/" title="primitive StatusSwitchingProtocols" class="md-nav__link">
      primitive StatusSwitchingProtocols
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusOK/" title="primitive StatusOK" class="md-nav__link">
      primitive StatusOK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusCreated/" title="primitive StatusCreated" class="md-nav__link">
      primitive StatusCreated
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusAccepted/" title="primitive StatusAccepted" class="md-nav__link">
      primitive StatusAccepted
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNonAuthoritativeInfo/" title="primitive StatusNonAuthoritativeInfo" class="md-nav__link">
      primitive StatusNonAuthoritativeInfo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNoContent/" title="primitive StatusNoContent" class="md-nav__link">
      primitive StatusNoContent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusResetContent/" title="primitive StatusResetContent" class="md-nav__link">
      primitive StatusResetContent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusPartialContent/" title="primitive StatusPartialContent" class="md-nav__link">
      primitive StatusPartialContent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusMultipleChoices/" title="primitive StatusMultipleChoices" class="md-nav__link">
      primitive StatusMultipleChoices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusMovedPermanently/" title="primitive StatusMovedPermanently" class="md-nav__link">
      primitive StatusMovedPermanently
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusFound/" title="primitive StatusFound" class="md-nav__link">
      primitive StatusFound
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusSeeOther/" title="primitive StatusSeeOther" class="md-nav__link">
      primitive StatusSeeOther
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNotModified/" title="primitive StatusNotModified" class="md-nav__link">
      primitive StatusNotModified
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusUseProxy/" title="primitive StatusUseProxy" class="md-nav__link">
      primitive StatusUseProxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusTemporaryRedirect/" title="primitive StatusTemporaryRedirect" class="md-nav__link">
      primitive StatusTemporaryRedirect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusBadRequest/" title="primitive StatusBadRequest" class="md-nav__link">
      primitive StatusBadRequest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusUnauthorized/" title="primitive StatusUnauthorized" class="md-nav__link">
      primitive StatusUnauthorized
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusPaymentRequired/" title="primitive StatusPaymentRequired" class="md-nav__link">
      primitive StatusPaymentRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusForbidden/" title="primitive StatusForbidden" class="md-nav__link">
      primitive StatusForbidden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNotFound/" title="primitive StatusNotFound" class="md-nav__link">
      primitive StatusNotFound
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusMethodNotAllowed/" title="primitive StatusMethodNotAllowed" class="md-nav__link">
      primitive StatusMethodNotAllowed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNotAcceptable/" title="primitive StatusNotAcceptable" class="md-nav__link">
      primitive StatusNotAcceptable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusProxyAuthRequired/" title="primitive StatusProxyAuthRequired" class="md-nav__link">
      primitive StatusProxyAuthRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusRequestTimeout/" title="primitive StatusRequestTimeout" class="md-nav__link">
      primitive StatusRequestTimeout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusConflict/" title="primitive StatusConflict" class="md-nav__link">
      primitive StatusConflict
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusGone/" title="primitive StatusGone" class="md-nav__link">
      primitive StatusGone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusLengthRequired/" title="primitive StatusLengthRequired" class="md-nav__link">
      primitive StatusLengthRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusPreconditionFailed/" title="primitive StatusPreconditionFailed" class="md-nav__link">
      primitive StatusPreconditionFailed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusRequestEntityTooLarge/" title="primitive StatusRequestEntityTooLarge" class="md-nav__link">
      primitive StatusRequestEntityTooLarge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusRequestURITooLong/" title="primitive StatusRequestURITooLong" class="md-nav__link">
      primitive StatusRequestURITooLong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusUnsupportedMediaType/" title="primitive StatusUnsupportedMediaType" class="md-nav__link">
      primitive StatusUnsupportedMediaType
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusRequestedRangeNotSatisfiable/" title="primitive StatusRequestedRangeNotSatisfiable" class="md-nav__link">
      primitive StatusRequestedRangeNotSatisfiable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusExpectationFailed/" title="primitive StatusExpectationFailed" class="md-nav__link">
      primitive StatusExpectationFailed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusTeapot/" title="primitive StatusTeapot" class="md-nav__link">
      primitive StatusTeapot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusPreconditionRequired/" title="primitive StatusPreconditionRequired" class="md-nav__link">
      primitive StatusPreconditionRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusTooManyRequests/" title="primitive StatusTooManyRequests" class="md-nav__link">
      primitive StatusTooManyRequests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusRequestHeaderFieldsTooLarge/" title="primitive StatusRequestHeaderFieldsTooLarge" class="md-nav__link">
      primitive StatusRequestHeaderFieldsTooLarge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusUnavailableForLegalReasons/" title="primitive StatusUnavailableForLegalReasons" class="md-nav__link">
      primitive StatusUnavailableForLegalReasons
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusInternalServerError/" title="primitive StatusInternalServerError" class="md-nav__link">
      primitive StatusInternalServerError
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNotImplemented/" title="primitive StatusNotImplemented" class="md-nav__link">
      primitive StatusNotImplemented
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusBadGateway/" title="primitive StatusBadGateway" class="md-nav__link">
      primitive StatusBadGateway
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusServiceUnavailable/" title="primitive StatusServiceUnavailable" class="md-nav__link">
      primitive StatusServiceUnavailable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusGatewayTimeout/" title="primitive StatusGatewayTimeout" class="md-nav__link">
      primitive StatusGatewayTimeout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusHTTPVersionNotSupported/" title="primitive StatusHTTPVersionNotSupported" class="md-nav__link">
      primitive StatusHTTPVersionNotSupported
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StatusNetworkAuthenticationRequired/" title="primitive StatusNetworkAuthenticationRequired" class="md-nav__link">
      primitive StatusNetworkAuthenticationRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-Logger/" title="interface Logger" class="md-nav__link">
      interface Logger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-ServerNotify/" title="interface ServerNotify" class="md-nav__link">
      interface ServerNotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HTTPServer/" title="actor HTTPServer" class="md-nav__link">
      actor HTTPServer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-ChunkedTransfer/" title="primitive ChunkedTransfer" class="md-nav__link">
      primitive ChunkedTransfer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-StreamTransfer/" title="primitive StreamTransfer" class="md-nav__link">
      primitive StreamTransfer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-OneshotTransfer/" title="primitive OneshotTransfer" class="md-nav__link">
      primitive OneshotTransfer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-TransferMode/" title="type TransferMode" class="md-nav__link">
      type TransferMode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-Payload/" title="class Payload" class="md-nav__link">
      class Payload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-MimeTypes/" title="primitive MimeTypes" class="md-nav__link">
      primitive MimeTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HTTPSession/" title="interface HTTPSession" class="md-nav__link">
      interface HTTPSession
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-ParseError/" title="primitive ParseError" class="md-nav__link">
      primitive ParseError
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HTTPParser/" title="class HTTPParser" class="md-nav__link">
      class HTTPParser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-AuthFailed/" title="primitive AuthFailed" class="md-nav__link">
      primitive AuthFailed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-ConnectionClosed/" title="primitive ConnectionClosed" class="md-nav__link">
      primitive ConnectionClosed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-ConnectFailed/" title="primitive ConnectFailed" class="md-nav__link">
      primitive ConnectFailed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HTTPFailureReason/" title="type HTTPFailureReason" class="md-nav__link">
      type HTTPFailureReason
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HTTPHandler/" title="interface HTTPHandler" class="md-nav__link">
      interface HTTPHandler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HandlerFactory/" title="interface HandlerFactory" class="md-nav__link">
      interface HandlerFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-DiscardLog/" title="primitive DiscardLog" class="md-nav__link">
      primitive DiscardLog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-ContentsLog/" title="class ContentsLog" class="md-nav__link">
      class ContentsLog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-CommonLog/" title="class CommonLog" class="md-nav__link">
      class CommonLog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http-HTTPClient/" title="class HTTPClient" class="md-nav__link">
      class HTTPClient
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Url</h1>
                
                <pre><code class="language-pony-full-source">class val URL
  &quot;&quot;&quot;
  Holds the components of a URL. These are always stored as valid, URL-encoded
  values.
  &quot;&quot;&quot;
  var scheme: String = &quot;&quot;
    &quot;&quot;&quot;
    URL scheme.

    If the given URL does not provide a scheme, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.1).
    &quot;&quot;&quot;

  var user: String = &quot;&quot;
    &quot;&quot;&quot;
    URL user as part of the URLs authority component:

    ```
    authority = [ user [ &quot;:&quot; password ] &quot;@&quot; ] host [ &quot;:&quot; port ]
    ```

    If the URL does not provide user information, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.2.1).
    &quot;&quot;&quot;

  var password: String = &quot;&quot;
    &quot;&quot;&quot;
    URL password as part of the URLs authority component:

    ```
    authority = [ user [ &quot;:&quot; password ] &quot;@&quot; ] host [ &quot;:&quot; port ]
    ```

    If the URL does not provide a password, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.2.1).
    &quot;&quot;&quot;

  var host: String = &quot;&quot;
    &quot;&quot;&quot;
    URL host as part of the URLs authority component:

    ```
    authority = [ user [ &quot;:&quot; password ] &quot;@&quot; ] host [ &quot;:&quot; port ]
    ```

    If the URL does not provide a host, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.2.2).
    &quot;&quot;&quot;

  var port: U16 = 0
    &quot;&quot;&quot;
    URL port as part of the URLs authority component:

    ```
    authority = [ user [ &quot;:&quot; password ] &quot;@&quot; ] host [ &quot;:&quot; port ]
    ```

    If the URL does not provide a port, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.2.3).
    &quot;&quot;&quot;

  var path: String = &quot;&quot;
    &quot;&quot;&quot;
    URL path component.

    If the URL does not provide a path component, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.3).
    &quot;&quot;&quot;

  var query: String = &quot;&quot;
    &quot;&quot;&quot;
    URL query component.

    If the URL does not provide a query component, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.4).
    &quot;&quot;&quot;

  var fragment: String = &quot;&quot;
    &quot;&quot;&quot;
    Url fragment identifier component.

    If the URL does not provide a fragment identifier component, this will be the empty string.

    See also [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3.5).
    &quot;&quot;&quot;

  new val create() =&gt;
    &quot;&quot;&quot;
    Create an empty URL.
    &quot;&quot;&quot;
    None

  new val build(from: String, percent_encoded: Bool = true) ? =&gt;
    &quot;&quot;&quot;
    Parse the URL string into its components. If it isn't URL encoded, encode
    it. If existing URL encoding is invalid, raise an error.
    &quot;&quot;&quot;
    _parse(from)?

    if not URLEncode.check_scheme(scheme) then error end
    user = URLEncode.encode(user, URLPartUser, percent_encoded)?
    password = URLEncode.encode(password, URLPartPassword, percent_encoded)?
    host = URLEncode.encode(host, URLPartHost, percent_encoded)?
    path = URLEncode.encode(path, URLPartPath, percent_encoded)?
    query = URLEncode.encode(query, URLPartQuery, percent_encoded)?
    fragment = URLEncode.encode(fragment, URLPartFragment, percent_encoded)?

  new val valid(from: String) ? =&gt;
    &quot;&quot;&quot;
    Parse the URL string into its components. If it isn't URL encoded, raise an
    error.
    &quot;&quot;&quot;
    _parse(from)?

    if not is_valid() then
      error
    end

  fun is_valid(): Bool =&gt;
    &quot;&quot;&quot;
    Return true if all elements are correctly URL encoded.
    &quot;&quot;&quot;
    URLEncode.check_scheme(scheme) and
      URLEncode.check(user, URLPartUser) and
      URLEncode.check(password, URLPartPassword) and
      URLEncode.check(host, URLPartHost) and
      URLEncode.check(path, URLPartPath) and
      URLEncode.check(query, URLPartQuery) and
      URLEncode.check(fragment, URLPartFragment)

  fun string(): String iso^ =&gt;
    &quot;&quot;&quot;
    Combine the components into a string.
    &quot;&quot;&quot;
    let len =
      scheme.size() + 3 + user.size() + 1 + password.size() + 1 + host.size()
        + 6 + path.size() + 1 + query.size() + 1 + fragment.size()
    let s = recover String(len) end

    if scheme.size() &gt; 0 then
      s.append(scheme)
      s.append(&quot;:&quot;)
    end

    if (user.size() &gt; 0) or (host.size() &gt; 0) then
      s.append(&quot;//&quot;)
    end

    if user.size() &gt; 0 then
      s.append(user)

      if password.size() &gt; 0 then
        s.append(&quot;:&quot;)
        s.append(password)
      end

      s.append(&quot;@&quot;)
    end

    if host.size() &gt; 0 then
      s.append(host)

      // Do not output port if it's the scheme default.
      if port != default_port() then
        s.append(&quot;:&quot;)
        s.append(port.string())
      end
    end

    s.append(path)

    if query.size() &gt; 0 then
      s.append(&quot;?&quot;)
      s.append(query)
    end

    if fragment.size() &gt; 0 then
      s.append(&quot;#&quot;)
      s.append(fragment)
    end

    consume s

  fun val join(that: URL): URL =&gt;
    &quot;&quot;&quot;
    Using this as a base URL, concatenate with another, possibly relative, URL
    in the same way a browser does for a link.
    &quot;&quot;&quot;
    // TODO:
    this

  fun default_port(): U16 =&gt;
    &quot;&quot;&quot;
    Report the default port for our scheme.
    Returns 0 for unrecognised schemes.
    &quot;&quot;&quot;
    match scheme
    | &quot;http&quot; =&gt; 80
    | &quot;https&quot; =&gt; 443
    else 0
    end

  fun ref _parse(from: String) ? =&gt;
    &quot;&quot;&quot;
    Parse the given string as a URL.
    Raises an error on invalid port number.
    &quot;&quot;&quot;
    (var offset, scheme) = _parse_scheme(from)
    (offset, let authority) = _parse_part(from, &quot;//&quot;, &quot;/?#&quot;, offset)
    (offset, path) = _parse_part(from, &quot;&quot;, &quot;?#&quot;, offset)
    (offset, query) = _parse_part(from, &quot;?&quot;, &quot;#&quot;, offset)
    (offset, fragment) = _parse_part(from, &quot;#&quot;, &quot;&quot;, offset)

    if path.size() == 0 then
      // An empty path is a root path.
      path = &quot;/&quot;
    end

    (var userinfo, var hostport) = _split(authority, '@')

    if hostport.size() == 0 then
      // No '@' found, hostport is whole of authority.
      hostport = userinfo = &quot;&quot;
    end

    (user, password) = _split(userinfo, ':')
    (host, var port_str) = _parse_hostport(hostport)

    port =
      if port_str.size() &gt; 0 then
        port_str.u16()?
      else
        default_port()
      end

  fun _parse_scheme(from: String): (/*offset*/ISize, /*scheme*/String) =&gt;
    &quot;&quot;&quot;
    Find the scheme, if any, at the start of the given string.
    The offset of the part following the scheme is returned.
    &quot;&quot;&quot;
    // We have a scheme only if we have a ':' before any of &quot;/?#&quot;.
    try
      var i = USize(0)

      while i &lt; from.size() do
        let c = from(i)?

        if c == ':' then
          // Scheme found.
          return ((i + 1).isize(), from.substring(0, i.isize()))
        end

        if (c == '/') or (c == '?') or (c == '#') then
          // No scheme.
          return (0, &quot;&quot;)
        end

        i = i + 1
      end
    end

    // End of string reached without finding any relevant terminators.
    (0, &quot;&quot;)

  fun _parse_part(
    from: String,
    prefix: String,
    terminators: String,
    offset: ISize)
    : (/*offset*/ISize, /*part*/String)
  =&gt;
    &quot;&quot;&quot;
    Attempt to parse the specified part out of the given string. Only attempt
    the parse if the given prefix is found first. Pass &quot;&quot; if no prefix is
    needed. The part ends when any one of the given terminator characters is
    found, or the end of the input is reached. The offset of the terminator is
    returned, if one is found.
    &quot;&quot;&quot;
    if (prefix.size() &gt; 0) and (not from.at(prefix, offset)) then
      // Prefix not found.
      return (offset, &quot;&quot;)
    end

    let start = offset + prefix.size().isize()

    try
      var i = start.usize()

      while i &lt; from.size() do
        let c = from(i)?

        var j = USize(0)
        while j &lt; terminators.size() do
          if terminators(j)? == c then
            // Terminator found.
            return (i.isize(), from.substring(start, i.isize()))
          end

          j = j + 1
        end

        i = i + 1
      end
    end

    // No terminator found, take whole string.
    (from.size().isize(), from.substring(start))

  fun _split(src: String, separator: U8): (String, String) =&gt;
    &quot;&quot;&quot;
    Split the given string in 2 around the first instance of the specified
    separator. If the string does not contain the separator then the first
    resulting string is the whole src and the second is empty.
    &quot;&quot;&quot;
    try
      var i = USize(0)

      while i &lt; src.size() do
        if src(i)? == separator then
          // Separator found.
          return (src.substring(0, i.isize()), src.substring((i + 1).isize()))
        end

        i = i + 1
      end
    end

    // Separator not found.
    (src, &quot;&quot;)

  fun _parse_hostport(hostport: String): (/*host*/String, /*port*/String) =&gt;
    &quot;&quot;&quot;
    Split the given &quot;host and port&quot; string into the host and port parts.
    &quot;&quot;&quot;
    try
      if (hostport.size() == 0) or (hostport(0)? != '[') then
        // This is not an IPv6 format host, just split at the first ':'.
        return _split(hostport, ':')
      end

      // This is an IPv6 format host, need to find the ']'
      var i = USize(0)
      var terminator = U8(']')

      while i &lt; hostport.size() do
        if hostport(i)? == terminator then
          if terminator == ':' then
            // ':' found, now we can separate the host and port
            return (hostport.substring(0, i.isize()),
              hostport.substring((i + 1).isize()))
          end

          // ']' found, now find ':'
          terminator = ':'
        end

        i = i + 1
      end
    end

    // ':' not found, we have no port.
    (hostport, &quot;&quot;)

</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
    <script src="../../../assets/javascripts/application.cb37bb38.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>